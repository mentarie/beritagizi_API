{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\IAI-WEB-Intero\\\\beritagizi_API\\\\src\\\\app\\\\kms-page.js\";\nimport React, { Component } from 'react';\nimport KmsComponent from '../modules/kms-component';\nimport axios from 'axios';\nimport { message, Button, Modal } from 'antd';\nconst {\n  confirm\n} = Modal;\n\nclass KmsPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false,\n      visible_edit: false,\n      anak: [],\n      document_id: '',\n      name: '',\n      age: '',\n      weight: '',\n      height: '',\n      institution: '',\n      location: '',\n      name_edit: '',\n      age_edit: '',\n      weight_edit: '',\n      height_edit: '',\n      institution_edit: '',\n      location_edit: ''\n    };\n\n    this.getAnak = () => {\n      axios.get(`https://kms-backend.herokuapp.com/`).then(res => {\n        console.log(res.data.data);\n        this.setState({\n          anak: res.data.data\n        });\n      });\n    };\n\n    this.handleChange = e => {\n      let target = e.target.name;\n      let value = e.target.value;\n      this.setState({\n        [target]: value\n      });\n    };\n\n    this.insertAnak = () => {\n      const params = new FormData();\n      params.set('name', this.state.name);\n      params.set('age', this.state.age);\n      params.set('weight', this.state.weight);\n      params.set('height', this.state.height);\n      params.set('location', this.state.location);\n      params.set('institution', this.state.institution);\n      axios.post('https://kms-backend.herokuapp.com/insert', params).then(res => {\n        if (res.status === 200) {\n          message.success('Data Anak berhasil Ditambahkan');\n          this.componentDidMount();\n        }\n      });\n    };\n\n    this.editAnak = () => {\n      const params = new FormData();\n      params.set('document_id', this.state.document_id);\n      params.set('name', this.state.name_edit);\n      params.set('age', this.state.age_edit);\n      params.set('weight', this.state.weight_edit);\n      params.set('height', this.state.height_edit);\n      params.set('location', this.state.location_edit);\n      params.set('institution', this.state.institution_edit);\n      axios.post('https://kms-backend.herokuapp.com/update', params).then(res => {\n        if (res.status === 200) {\n          message.success('Data Anak berhasil Diubah');\n          this.componentDidMount();\n        }\n      });\n    };\n\n    this.deleteAnak = id => {\n      const params = new FormData();\n      params.set('document_id', id);\n      axios.post('https://kms-backend.herokuapp.com/delete', params).then(res => {\n        if (res.status === 200) {\n          message.success('Data Anak berhasil Dihapus');\n          this.componentDidMount();\n        }\n      });\n    };\n\n    this.showModalEdit = (document_id, nama_anak, usia_anak, bb, tb, lokasi, instansi, tanggal) => {\n      console.log(document_id, nama_anak, usia_anak, bb, tb, lokasi, instansi, tanggal);\n      this.setState({\n        visible_edit: true,\n        document_id: document_id,\n        name_edit: nama_anak,\n        age_edit: usia_anak,\n        weight_edit: bb,\n        height_edit: tb,\n        location_edit: lokasi,\n        institution_edit: instansi\n      });\n    };\n\n    this.showModal = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.handleOk = e => {\n      console.log(e);\n      this.insertAnak();\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCancel = e => {\n      console.log(e);\n      this.setState({\n        visible: false // visible_edit: true,\n\n      });\n    };\n\n    this.handleOkEdit = e => {\n      console.log(e);\n      this.editAnak();\n      this.setState({\n        visible_edit: false\n      });\n    };\n\n    this.handleCancelEdit = e => {\n      console.log(e);\n      this.setState({\n        visible_edit: false\n      });\n    };\n\n    this.showDeleteConfirm = id => {\n      confirm({\n        title: 'Yakin untuk menghapus ?',\n        okText: 'Yes',\n        okType: 'danger',\n        cancelText: 'No',\n        onOk: () => {\n          this.deleteAnak(id);\n        },\n\n        onCancel() {\n          console.log('Cancel');\n        }\n\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getAnak();\n  }\n\n  render() {\n    const columns = [{\n      title: 'Nama Anak',\n      dataIndex: 'nama_anak',\n      key: 'nama_anak',\n      render: text => React.createElement(\"a\", {\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, text)\n    }, {\n      title: 'Usia',\n      dataIndex: 'usia_anak',\n      key: 'usia_anak'\n    }, {\n      title: 'Berat Badan',\n      dataIndex: 'bb',\n      key: 'bb'\n    }, {\n      title: 'Tinggi Badan',\n      dataIndex: 'tb',\n      key: 'tb'\n    }, {\n      title: 'Instansi',\n      dataIndex: 'instansi',\n      key: 'instansi'\n    }, {\n      title: 'Lokasi',\n      dataIndex: 'lokasi',\n      key: 'lokasi'\n    }, {\n      title: 'Tanggal',\n      dataIndex: 'tanggal',\n      key: 'tanggal'\n    }, {\n      title: 'Action',\n      key: 'action',\n      render: anak => React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(Button, {\n        key: \"edit_data\",\n        className: \"editable-add-btn\",\n        type: \"primary\",\n        onClick: () => this.showModalEdit(anak.document_id, anak.nama_anak, anak.usia_anak, anak.bb, anak.tb, anak.lokasi, anak.instansi, anak.tanggal),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Edit data\"), React.createElement(\"span\", {\n        className: \"ant-divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(Button, {\n        key: \"edit_data\",\n        className: \"editable-add-btn\",\n        type: \"danger\",\n        onClick: () => this.showDeleteConfirm(anak.document_id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Hapus data\"), React.createElement(\"span\", {\n        className: \"ant-divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), React.createElement(\"a\", {\n        href: \"#\",\n        className: \"ant-dropdown-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }))\n    }];\n    const anak = this.state.anak.map(data => ({\n      document_id: data.id,\n      nama_anak: data.name,\n      usia_anak: data.age,\n      bb: data.weight,\n      tb: data.height,\n      instansi: data.institution,\n      lokasi: data.location,\n      tanggal: data.date\n    }));\n    return React.createElement(KmsComponent, {\n      initialData: this.state //ini maksudnya membuat varibel initalData yg isinya semua state yang telah dibuat\n      ,\n      showModal: this.showModal //ini maksudnya membuat variabel showmodal yang akan dipanggil, this.showmodal mksdnya itu manggil functin show modal, karena masih satu halaman pakainya this.\n      ,\n      handleCancel: this.handleCancel //sama seperti showmodal\n      ,\n      handleOk: this.handleOk //sama seperti showmodal\n      ,\n      columns: columns,\n      anak: anak,\n      handleChange: this.handleChange,\n      insertAnak: this.insertAnak,\n      handleOkEdit: this.handleOkEdit,\n      handleCancelEdit: this.handleCancelEdit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default KmsPage;","map":{"version":3,"sources":["C:/xampp/htdocs/IAI-WEB-Intero/beritagizi_API/src/app/kms-page.js"],"names":["React","Component","KmsComponent","axios","message","Button","Modal","confirm","KmsPage","state","visible","visible_edit","anak","document_id","name","age","weight","height","institution","location","name_edit","age_edit","weight_edit","height_edit","institution_edit","location_edit","getAnak","get","then","res","console","log","data","setState","handleChange","e","target","value","insertAnak","params","FormData","set","post","status","success","componentDidMount","editAnak","deleteAnak","id","showModalEdit","nama_anak","usia_anak","bb","tb","lokasi","instansi","tanggal","showModal","handleOk","handleCancel","handleOkEdit","handleCancelEdit","showDeleteConfirm","title","okText","okType","cancelText","onOk","onCancel","render","columns","dataIndex","key","text","map","date"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'; \r\nimport KmsComponent from '../modules/kms-component'\r\nimport axios from 'axios';\r\nimport { message, Button, Modal } from 'antd';\r\n\r\nconst {confirm} = Modal;\r\n\r\nclass KmsPage extends Component {\r\n    state ={\r\n        visible: false,\r\n        visible_edit : false,\r\n        anak:[],\r\n        document_id: '',\r\n        name : '',\r\n        age : '',\r\n        weight : '',\r\n        height: '',\r\n        institution : '',\r\n        location : '',\r\n        name_edit : '',\r\n        age_edit : '',\r\n        weight_edit : '',\r\n        height_edit: '',\r\n        institution_edit : '',\r\n        location_edit : '',\r\n    }\r\n   \r\n    componentDidMount(){\r\n        this.getAnak();\r\n    }\r\n\r\n    getAnak = () => {\r\n      axios.get(`https://kms-backend.herokuapp.com/`)\r\n      .then(res => {\r\n        console.log(res.data.data);\r\n        this.setState({anak: res.data.data});\r\n      })\r\n    }\r\n\r\n    handleChange = (e) => {\r\n      let target = e.target.name;\r\n      let value = e.target.value;\r\n      this.setState({\r\n          [target]: value\r\n      })\r\n    }\r\n\r\n    insertAnak = () =>{\r\n      const params = new FormData()\r\n      params.set('name',this.state.name)\r\n      params.set('age',this.state.age)\r\n      params.set('weight',this.state.weight)\r\n      params.set('height',this.state.height)\r\n      params.set('location',this.state.location)\r\n      params.set('institution',this.state.institution)\r\n\r\n      axios.post('https://kms-backend.herokuapp.com/insert',params)\r\n      .then(res=>{\r\n        if(res.status === 200){\r\n          message.success('Data Anak berhasil Ditambahkan');\r\n          this.componentDidMount();\r\n        }\r\n      })\r\n    }\r\n\r\n    editAnak = () => {\r\n      const params = new FormData()\r\n      params.set('document_id',this.state.document_id)\r\n      params.set('name',this.state.name_edit)\r\n      params.set('age',this.state.age_edit)\r\n      params.set('weight',this.state.weight_edit)\r\n      params.set('height',this.state.height_edit)\r\n      params.set('location',this.state.location_edit)\r\n      params.set('institution',this.state.institution_edit)\r\n\r\n      axios.post('https://kms-backend.herokuapp.com/update',params)\r\n      .then(res=>{\r\n        if(res.status === 200){\r\n          message.success('Data Anak berhasil Diubah');\r\n          this.componentDidMount();\r\n        }\r\n      })\r\n    }\r\n\r\n    deleteAnak = (id) => {\r\n      const params = new FormData()\r\n      params.set('document_id',id)\r\n\r\n      axios.post('https://kms-backend.herokuapp.com/delete',params)\r\n      .then(res=>{\r\n        if(res.status === 200){\r\n          message.success('Data Anak berhasil Dihapus');\r\n          this.componentDidMount();\r\n        }\r\n      })\r\n\r\n    }\r\n\r\n    showModalEdit = ( document_id,nama_anak,usia_anak,bb,tb,lokasi,instansi,tanggal) => {\r\n      console.log(document_id,nama_anak,usia_anak,bb,tb,lokasi,instansi,tanggal)\r\n      this.setState({\r\n        visible_edit: true,\r\n        document_id : document_id,\r\n        name_edit :nama_anak,\r\n        age_edit : usia_anak,\r\n        weight_edit : bb,\r\n        height_edit: tb,\r\n        location_edit : lokasi, \r\n        institution_edit : instansi,  \r\n      });\r\n    };\r\n    \r\n\r\n    showModal = () => {\r\n        this.setState({\r\n          visible: true,\r\n        });\r\n    };\r\n\r\n    handleOk = e => {\r\n        console.log(e);\r\n        this.insertAnak();\r\n        this.setState({\r\n          visible: false,\r\n        });\r\n    };\r\n    \r\n    handleCancel = e => {\r\n      console.log(e);\r\n      this.setState({\r\n        visible: false,\r\n        // visible_edit: true,\r\n      });\r\n    };\r\n    //handleOk dan handleCancel digunakan untuk close modal\r\n\r\n    handleOkEdit = e => {\r\n      console.log(e);\r\n      this.editAnak();\r\n      this.setState({\r\n        visible_edit: false,\r\n      });\r\n    };\r\n    \r\n    handleCancelEdit = e => {\r\n      console.log(e);\r\n      this.setState({\r\n        visible_edit: false,\r\n      });\r\n    };\r\n\r\n    showDeleteConfirm = (id) => {\r\n      confirm({\r\n          title: 'Yakin untuk menghapus ?',\r\n          okText: 'Yes',\r\n          okType: 'danger',\r\n          cancelText: 'No',\r\n          onOk: () => {\r\n              this.deleteAnak(id)\r\n          },\r\n          onCancel(){\r\n              console.log('Cancel')\r\n          }\r\n      });\r\n  }\r\n\r\n    render(){\r\n    \r\n    const columns = [{\r\n        title: 'Nama Anak',\r\n        dataIndex: 'nama_anak',\r\n        key: 'nama_anak',\r\n        render: text => <a href=\"#\">{text}</a>,\r\n      }, {\r\n        title: 'Usia',\r\n        dataIndex: 'usia_anak',\r\n        key: 'usia_anak',\r\n      },\r\n      {\r\n        title: 'Berat Badan',\r\n        dataIndex: 'bb',\r\n        key: 'bb',\r\n      }, {\r\n        title: 'Tinggi Badan',\r\n        dataIndex: 'tb',\r\n        key: 'tb',\r\n      }, {\r\n        title: 'Instansi',\r\n        dataIndex: 'instansi',\r\n        key: 'instansi',\r\n      }, {\r\n        title: 'Lokasi',\r\n        dataIndex: 'lokasi',\r\n        key: 'lokasi',\r\n      },{\r\n        title: 'Tanggal',\r\n        dataIndex: 'tanggal',\r\n        key: 'tanggal',\r\n      }, {\r\n        title: 'Action',\r\n        key: 'action',\r\n        render: (anak) => (\r\n          <span>\r\n            <Button key=\"edit_data\" className=\"editable-add-btn\" type=\"primary\" onClick={()=>this.showModalEdit(\r\n            anak.document_id,anak.nama_anak,anak.usia_anak,anak.bb,anak.tb,anak.lokasi,anak.instansi,anak.tanggal,\r\n            )}>Edit data</Button>\r\n            <span className=\"ant-divider\" />\r\n            <Button key=\"edit_data\" className=\"editable-add-btn\" type=\"danger\" onClick={()=>this.showDeleteConfirm(\r\n            anak.document_id\r\n            )}>Hapus data</Button>\r\n            <span className=\"ant-divider\" />\r\n            <a href=\"#\" className=\"ant-dropdown-link\">\r\n              {/* More actions <Icon type=\"down\" /> */}\r\n            </a>\r\n          </span>\r\n        ),\r\n    }];\r\n    \r\n    const anak = this.state.anak.map(data => ({\r\n        document_id : data.id,\r\n        nama_anak : data.name,\r\n        usia_anak : data.age,\r\n        bb : data.weight,\r\n        tb : data.height,\r\n        instansi : data.institution,\r\n        lokasi : data.location,\r\n        tanggal : data.date,\r\n    }))\r\n\r\n  \r\n    \r\n      return (\r\n            <KmsComponent\r\n                initialData = {this.state} //ini maksudnya membuat varibel initalData yg isinya semua state yang telah dibuat\r\n                showModal = {this.showModal} //ini maksudnya membuat variabel showmodal yang akan dipanggil, this.showmodal mksdnya itu manggil functin show modal, karena masih satu halaman pakainya this.\r\n                handleCancel = {this.handleCancel} //sama seperti showmodal\r\n                handleOk = {this.handleOk} //sama seperti showmodal\r\n                columns = {columns}\r\n                anak={anak}\r\n                handleChange = {this.handleChange}\r\n                insertAnak = {this.insertAnak}\r\n                handleOkEdit={this.handleOkEdit}\r\n                handleCancelEdit={this.handleCancelEdit}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default KmsPage;"]},"metadata":{},"sourceType":"module"}